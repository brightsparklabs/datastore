/*
 * Created by brightSPARK Labs
 * www.brightsparklabs.com
 */

// -----------------------------------------------------------------------------
// PLUGINS
// -----------------------------------------------------------------------------

plugins {
    // Apply the java-library plugin to add support for Java Library
    id 'java-library'

    // Apply the groovy plugin to also add support for Groovy (needed for Spock)
    id 'groovy'

    // Apply the brightSPARK Labs plugin for standardisation.
    id 'com.brightsparklabs.gradle.baseline' version '3.1.0'

    id "maven-publish"
}

sourceCompatibility = 17
targetCompatibility = 17

// -----------------------------------------------------------------------------
// PROJECT IDENTIFICATION
// -----------------------------------------------------------------------------

project.description = 'Library for storing/retrieving data by id into a backing store'
project.ext.url     = 'https://github.com/brightsparklabs/datastore'
project.ext.scm     = 'https://github.com/brightsparklabs/datastore.git'
project.group       = 'com.brightsparklabs'
project.version     = 'git describe --always --dirty'.execute().text.trim()

// -----------------------------------------------------------------------------
// REPOSITORIES/DEPENDENCIES
// -----------------------------------------------------------------------------

repositories {
    // Use mavenCentral for resolving dependencies.
    mavenCentral()
}

dependencies {
    def versions = [
        immutablesVersion: '2.9.3',
    ]

    // This dependency is exported to consumers, that is to say found on their compile classpath.
    implementation(
            // General
            'com.google.guava:guava:23.0',
            )

    compileOnly(
            "org.immutables:value:${versions.immutablesVersion}",
            )

    testImplementation(
            // Use the awesome Spock testing and specification framework even with Java
            'org.spockframework:spock-core:2.4-M1-groovy-4.0',
            'junit:junit:4.13.2',
            // Allow spock to mock non-interfaces
            'net.bytebuddy:byte-buddy:1.14.4',
            )

    annotationProcessor(
            "org.immutables:value:${versions.immutablesVersion}",
            )
}
